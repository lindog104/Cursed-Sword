[gd_scene load_steps=13 format=3 uid="uid://ba7pqrp1sr12"]

[ext_resource type="Script" path="res://scripts/enemies/state_slime.gd" id="1_nxx33"]
[ext_resource type="Texture2D" uid="uid://bkw5f85orddp0" path="res://assets/sprites/enemies/pixil-layer-Slime.png" id="2_muf55"]
[ext_resource type="PackedScene" uid="uid://dynu3c1quufp0" path="res://scenes/hurtbox_component.tscn" id="3_n8usa"]
[ext_resource type="PackedScene" uid="uid://dpubgon71gsw6" path="res://scenes/hitbox_component.tscn" id="4_g05hs"]
[ext_resource type="Script" path="res://scripts/states/state_machine.gd" id="5_5emyv"]
[ext_resource type="Script" path="res://scripts/states/slime/follow.gd" id="7_mranj"]
[ext_resource type="Script" path="res://scripts/states/slime/attack.gd" id="8_72o0q"]
[ext_resource type="Script" path="res://scripts/states/slime/stunned.gd" id="9_i1i11"]
[ext_resource type="Script" path="res://scripts/states/slime/die.gd" id="10_a38dp"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eumq4"]
size = Vector2(72, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_06l5c"]
radius = 43.0465

[sub_resource type="CircleShape2D" id="CircleShape2D_id38e"]
radius = 43.0116

[node name="StateSlime" type="CharacterBody2D"]
script = ExtResource("1_nxx33")
initial_speed = null
stun_threshhold = null
speed = null

[node name="Sprite2D" type="Sprite2D" parent="."]
use_parent_material = true
scale = Vector2(8, 8)
texture = ExtResource("2_muf55")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-1, 30)
shape = SubResource("RectangleShape2D_eumq4")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_desired_distance = 50.0
target_desired_distance = 100.0
debug_enabled = true

[node name="HurtboxComponent" parent="." instance=ExtResource("3_n8usa")]
max_health = 50

[node name="CollisionShape2D" parent="HurtboxComponent" index="0"]
position = Vector2(-1, 5)
shape = SubResource("CircleShape2D_06l5c")
debug_color = Color(0.202721, 0.640799, 0, 0.42)

[node name="HitboxComponent" parent="." instance=ExtResource("4_g05hs")]
damage = 25
disabled = true

[node name="CollisionShape2D" parent="HitboxComponent" index="0"]
position = Vector2(0, 5)
shape = SubResource("CircleShape2D_id38e")

[node name="VisibleOnScreenEnabler2D" type="VisibleOnScreenEnabler2D" parent="."]
position = Vector2(-0.500003, 4.5)
scale = Vector2(3.95, 3.65)

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initialState")]
script = ExtResource("5_5emyv")
initialState = NodePath("Follow")

[node name="Follow" type="Node" parent="StateMachine" node_paths=PackedStringArray("parent")]
script = ExtResource("7_mranj")
parent = NodePath("../..")

[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("parent")]
script = ExtResource("8_72o0q")
initial_attack_time = 0.1
parent = NodePath("../..")

[node name="Stunned" type="Node" parent="StateMachine" node_paths=PackedStringArray("parent")]
script = ExtResource("9_i1i11")
parent = NodePath("../..")

[node name="Die" type="Node" parent="StateMachine" node_paths=PackedStringArray("parent")]
script = ExtResource("10_a38dp")
parent = NodePath("../..")

[connection signal="target_reached" from="NavigationAgent2D" to="StateMachine/Follow" method="on_target_reached"]
[connection signal="area_entered" from="HitboxComponent" to="StateMachine/Attack" method="on_hit_detected"]

[editable path="HurtboxComponent"]
[editable path="HitboxComponent"]
